<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<!-- **** H E A D **** -->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Applications Multimédia pour le Web</title>

	<style>
		div {
			border: 1px dashed black;
			background-color:lightgrey;
			height:50px;
		}
		.disp_inline{
				display:inline;
				height:50px;
				
		}
		.disp_block{
				display:block;
				height:50px;
		}
		#popup{
				height:100px;
				width:100px;
				padding:5px;
				position:absolute;
				top:50px;
				right:50px;
				display:none;
				background-color:yellow;
		}

	</style>

	<script type="text/javascript">


		var noeud = null;
		var refBtnCacher = null;
		var refBtnAfficher = null;
		// var noeud = document.getElementById("popup");	// var globale
		// Ce code est interprété "à la volée"
		// Le navigateur ne connait pas le popup d'id "popup"
		// La fonction getElement... renvoie null

		// ne marche pas... pourquoi ?
		// Erreur ffox : noeud is null
		// Erreur chrome : Uncaught TypeError: Cannot read property 'style' of null

		// solution :
		// 1) onload="init()" dans body
		// Evenement load : fin du chargement de la page par le navigateur

		// 2) appels à getElementById dans chaque fonction
		// 3) placer ce code tout en bas de la page

		//TODO: Supprimer un bouton et modifier le code pour que le même bouton puisse servir à cacher/afficher. Utiliser le mot-clé « this ».

		function toggle_popup(refBtn) {

		    // SI le popup est caché
			// On peut tester le label du bouton
			// OU la propriété style.display du popup

			// NB : les propiétés CSS du document ne sont pas toutes propagées dans le DOM
			// Par exemple, ici au chargement de la page, la propriété noeud.style.display vaut ""

			// if (noeud.style.display != "block" ) {
            if (refBtn.value == "Afficher popup" ) {
                noeud.style.display = "block"; // On affiche
                refBtn.value = "Cacher popup"; // on change le label
            } else {
                noeud.style.display = "none"; // On affiche
                refBtn.value = "Afficher popup"; // on change le label
			}

        }

		function init(){
			// SURTOUT PAS DE var noeud ICI !!
            noeud = document.getElementById("popup");
        }
	</script>

</head>
<!-- **** F I N **** H E A D **** -->

<!-- **** B O D Y **** -->
<body onload="init()">

	avant 1
	<div>Paragraphe 1 par défaut</div>
	après 1
	<hr />

	avant 2
	<div class="disp_block">Paragraphe 2 en mode display=block</div>
	après 2

	<hr />

	avant 3
	<div class="disp_inline">Paragraphe en mode display=inline</div>
	après 3

	<hr />

	avant popup
	<div id="popup">Paragraphe en mode display=none</div>
	après popup

	<hr />

	<input type="button" value="Afficher popup" onclick="toggle_popup(this);"/>
	<!-- this dénote une référence vers l'élément cible de l'événement -->



</body>

<!-- **** F I N **** B O D Y **** -->


</html>
